{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Brute-force 3D background diagnostic (camera far=2000, red basic material, sphere radius=500)",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Configure the active PerspectiveCamera far plane to 2000 in SceneSetup and update its projection matrix so the diagnostic background sphere is not clipped.",
      "acceptanceCriteria": [
        "When rendering `CubeVisualization`, the active PerspectiveCamera has `far` set to 2000 and the projection matrix is updated (verified via console/logging or runtime inspection)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/CubeVisualization.tsx",
          "operation": "modify",
          "description": "Update `SceneSetup` to access the current `camera` from `useThree()`, detect when it is a `THREE.PerspectiveCamera`, set `camera.far = 2000`, and call `camera.updateProjectionMatrix()` as part of the diagnostic setup (keeping changes limited to this diagnostic only)."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Bypass the custom shader background and render the diagnostic BackgroundSphere using a solid red MeshBasicMaterial with BackSide and fog disabled.",
      "acceptanceCriteria": [
        "`BackgroundSphere` uses `THREE.MeshBasicMaterial` (via `meshBasicMaterial`) with solid red color, `side=THREE.BackSide`, and `fog={false}`.",
        "The custom `THREE.ShaderMaterial` background gradient is not used during this diagnostic test."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/CubeVisualization.tsx",
          "operation": "modify",
          "description": "Modify `BackgroundSphere` to bypass the current `THREE.ShaderMaterial` creation and instead render the sphere using a JSX `<meshBasicMaterial color=\"red\" side={THREE.BackSide} fog={false} />` for the diagnostic test, ensuring the shader material is not instantiated/used."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Increase diagnostic BackgroundSphere geometry radius from 50 to 500 while keeping the sphere inverted and always rendered behind the scene.",
      "acceptanceCriteria": [
        "`BackgroundSphere` creates an inverted `THREE.SphereGeometry` with radius 500.",
        "The sphere remains `renderOrder={-1}` and `frustumCulled={false}` so it is always drawn behind the scene."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/CubeVisualization.tsx",
          "operation": "modify",
          "description": "Change the `THREE.SphereGeometry` radius in `BackgroundSphere` from `50` to `500` and keep the inversion (`geometry.scale(-1, 1, 1)`), while preserving `renderOrder={-1}` and `frustumCulled={false}` on the mesh."
        }
      ]
    }
  ]
}