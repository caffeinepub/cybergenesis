{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Add on-screen debug UI and foolproof CSS to MapView for tablet testing",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Replace map container className-based styling with hardcoded inline styles to prevent height collapse",
      "acceptanceCriteria": [
        "Map container div uses inline style object instead of className",
        "Container has explicit 100vw width and 100vh height",
        "Container is absolutely positioned at top-left with zIndex 0"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MapView.tsx",
          "operation": "modify",
          "description": "Replace the map container's className=\"map-content\" with an inline style object containing: width: '100vw', height: '100vh', position: 'absolute', top: 0, left: 0, backgroundColor: '#111', zIndex: 0. This ensures the container has explicit dimensions and positioning to prevent 0px height collapse on tablets."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Update map initialization camera settings to safe values for flat overhead view",
      "acceptanceCriteria": [
        "Map center is set to [1704, 961] (middle of 3408x1922 image)",
        "Zoom level is changed from -1 to 1",
        "Pitch is changed from 30 to 0 for flat overhead view"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MapView.tsx",
          "operation": "modify",
          "description": "Update the maptalks.Map initialization options to use safe camera settings: center at [1704, 961] (the middle of the 3408x1922 image), zoom level 1 (instead of -1), and pitch 0 degrees (instead of 30) for a flat overhead view. These settings ensure predictable rendering on tablets."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Add on-screen debug UI overlay displaying real-time debug messages",
      "acceptanceCriteria": [
        "New debugMsg state variable initialized to 'Initializing...'",
        "Debug overlay div rendered with inline styles: position absolute, top 80px, left 20px, lime color text, semi-transparent black background, zIndex 9999",
        "Debug overlay displays current debugMsg value prefixed with 'DEBUG: '"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MapView.tsx",
          "operation": "modify",
          "description": "Add a new state variable `const [debugMsg, setDebugMsg] = useState('Initializing...');` and render an on-screen debug overlay div with inline styles: position: 'absolute', top: '80px', left: '20px', color: 'lime', backgroundColor: 'rgba(0,0,0,0.7)', padding: '10px', borderRadius: '5px', zIndex: 9999, fontFamily: 'monospace', fontSize: '14px'. The div should display the text 'DEBUG: ' followed by the current debugMsg value. This overlay is crucial for tablet debugging where DevTools are not accessible."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Implement event capture to update on-screen debug messages for map initialization and image loading",
      "acceptanceCriteria": [
        "After map initialization, a 500ms timeout updates debugMsg with 'Map Size: {width}x{height}'",
        "ImageLayer has 'resourceloaderror' event listener that sets debugMsg to 'IMAGE LOAD ERROR (CORS or Link)'",
        "ImageLayer has 'layerload' event listener that sets debugMsg to 'IMAGE LOADED OK'",
        "All debug messages are visible on tablet screen without DevTools"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MapView.tsx",
          "operation": "modify",
          "description": "After creating the maptalks.Map instance, add a 500ms setTimeout that captures map dimensions and updates debugMsg with 'Map Size: ' + mapRef.current.width + 'x' + mapRef.current.height. On the ImageLayer instance, add event listeners: 'resourceloaderror' listener that calls setDebugMsg('IMAGE LOAD ERROR (CORS or Link)'), and 'layerload' listener that calls setDebugMsg('IMAGE LOADED OK'). These events provide real-time feedback on map initialization and image loading status visible on the tablet screen without requiring DevTools."
        }
      ]
    }
  ]
}