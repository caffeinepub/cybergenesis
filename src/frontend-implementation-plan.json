{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Apply final “Studio Balance” shader + fog tuning in CubeVisualization",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Update BackgroundSphere fragment shader to final “Studio Balance” center/edge colors and sharper falloff.",
      "acceptanceCriteria": [
        "`BackgroundSphere` fragment shader uses `vec3 centerColor = vec3(1.6, 0.4, 3.2);` and `vec3 edgeColor = vec3(0.0, 0.0, 0.0);`.",
        "`BackgroundSphere` falloff uses `float d = pow(distance, 1.8);` and still mixes via `mix(centerColor, edgeColor, d)`.",
        "App compiles with no TypeScript/ESLint errors after shader edits."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/CubeVisualization.tsx",
          "operation": "modify",
          "description": "In `BackgroundSphere`'s `fragmentShader`, set `centerColor` to `vec3(1.6, 0.4, 3.2)`, keep `edgeColor` at `vec3(0.0, 0.0, 0.0)`, and update the gradient falloff to `float d = pow(distance, 1.8);` while preserving the existing `mix(centerColor, edgeColor, d)` usage."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Preserve BackgroundSphere material settings: fog disabled and BackSide rendering.",
      "acceptanceCriteria": [
        "`BackgroundSphere` renders with `side={THREE.BackSide}`.",
        "`BackgroundSphere` shader material has `fog={false}` explicitly set."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/CubeVisualization.tsx",
          "operation": "modify",
          "description": "Confirm `BackgroundSphere`'s `<shaderMaterial>` continues to explicitly include `fog={false}` and `side={THREE.BackSide}` after the shader edits (do not remove or alter these props)."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Tune scene fog to “Deep Space” using FogExp2 with specified color and density.",
      "acceptanceCriteria": [
        "`SceneSetup` sets `scene.fog = new THREE.FogExp2(0x05010a, 0.0015)`.",
        "Fog density remains `0.0015`."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/CubeVisualization.tsx",
          "operation": "modify",
          "description": "In `SceneSetup`, update fog assignment to `scene.fog = new THREE.FogExp2(0x05010a, 0.0015)` (keep density at `0.0015` and preserve `scene.background = null`)."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Ensure tone mapping exposure remains at 0.6 while applying shader and fog changes, without altering bloom settings.",
      "acceptanceCriteria": [
        "`gl.toneMappingExposure` remains set to `0.6` (no change).",
        "After changes, bloom remains enabled and the scene does not whiteout from the background glow at exposure 0.6."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/CubeVisualization.tsx",
          "operation": "modify",
          "description": "Verify `onCreated` keeps `gl.toneMappingExposure = 0.6` unchanged, and confirm no changes are made to the existing UnrealBloomPass parameters while integrating the updated background shader and fog values."
        }
      ]
    }
  ]
}