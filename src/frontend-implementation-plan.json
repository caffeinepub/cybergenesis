{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix Three.js canvas transparency by forcing clear alpha each frame",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Force Three.js renderer clear alpha to remain transparent every frame while Bloom/EffectComposer is rendering.",
      "acceptanceCriteria": [
        "`frontend/src/components/CubeVisualization.tsx` contains `gl.setClearAlpha(0)` inside `BloomEffect`’s `useFrame` handler.",
        "The change does not remove or disable the existing transparency clear steps (`gl.setClearColor(0x000000, 0)` and `gl.clear(true, true, true)`) and does not remove `<Canvas gl={{ ..., alpha: true }}>`.",
        "When a GLTF model finishes loading and Bloom/EffectComposer is active, the canvas background remains transparent (no black background appears behind the model).",
        "Fullscreen toggle behavior remains unchanged."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/CubeVisualization.tsx",
          "operation": "modify",
          "description": "Within the BloomEffect component’s existing useFrame callback, add `gl.setClearAlpha(0)` inside the `if (composerRef.current)` block and ensure it runs before `composerRef.current.render()`. Keep existing `gl.setClearColor(0x000000, 0)`, `gl.clear(true, true, true)`, and the Canvas `gl={{ ..., alpha: true }}` configuration unchanged, and do not alter fullscreen toggle logic."
        }
      ]
    }
  ]
}