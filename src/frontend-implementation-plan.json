{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Implement Golden Archive MapView rewrite with drone navigation physics",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Replace map instantiation with Golden Archive identity projection configuration",
      "acceptanceCriteria": [
        "Map uses identity projection with correct spatial reference and resolution pyramid",
        "Boundaries are enforced with maxExtent [0, -1922, 3408, 0] and panLimit true",
        "All drag and touch controls are enabled as specified",
        "dragInertia is enabled for kinetic physics",
        "devicePixelRatio is set for retina display support"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MapView.tsx",
          "operation": "modify",
          "description": "Replace the map instantiation block (approximately lines 127-148) with Golden Archive configuration. Update the `new window.maptalks.Map(...)` call to use identity projection with spatialReference containing resolutions [32, 16, 8, 4, 2, 1], fullExtent {top: 0, left: 0, bottom: -1922, right: 3408}, maxExtent new window.maptalks.Extent(0, -1922, 3408, 0), center [1704, -961], zoom 1, minZoom 0, maxZoom 5, pitch 45, bearing 0, devicePixelRatio window.devicePixelRatio || 2. Enable all drag/touch controls: draggable, dragPan, dragRotate, dragPitch, touchZoom, touchRotate, touchPitch set to true. Set dragInertia: true, seamlessZoom: true, centerCross: false, attribution: false. After map instantiation, add map.config('panLimit', true) to enforce boundary constraints."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Update ImageLayer to use Golden Archive webp source with continuous rendering",
      "acceptanceCriteria": [
        "ImageLayer uses the specified webp URL as the base map",
        "Layer extent matches the coordinate system [0, -1922, 3408, 0]",
        "forceRenderOnMoving is set to true for smooth rendering during navigation"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MapView.tsx",
          "operation": "modify",
          "description": "Update the ImageLayer configuration (approximately lines 151-160) to use the webp source URL 'https://raw.githubusercontent.com/dobr312/cyberland/refs/heads/main/CyberMap/IMG_8296.webp'. Set extent to [0, -1922, 3408, 0], opacity to 1, renderer to 'canvas', crossOrigin to 'anonymous', and add forceRenderOnMoving: true to the layer options for smooth rendering during map movement."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Update animateTo with cinematic drone entry parameters",
      "acceptanceCriteria": [
        "Initial animation zooms to level 3 with 55° pitch and 15° bearing",
        "Animation duration is 3500ms with 'out' easing",
        "Animation starts after 500ms delay"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MapView.tsx",
          "operation": "modify",
          "description": "Update the animateTo animation block (approximately lines 221-233) to use cinematic drone entry parameters. Wrap the entire animateTo call in a setTimeout with 500ms delay. Set center to [targetX, -targetY], zoom to 3, pitch to 55, bearing to 15, duration to 3500, and easing to 'out'. This creates a smooth cinematic entry effect when navigating to a land marker."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Update map container styling for mobile viewport and touch handling",
      "acceptanceCriteria": [
        "Container uses 100dvh for proper mobile viewport height",
        "touchAction: none prevents default touch behaviors",
        "overflow: hidden prevents scrolling outside the map"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MapView.tsx",
          "operation": "modify",
          "description": "Update the map container div style (approximately lines 284-294 in the main return statement) to include: position: 'fixed', top: 0, left: 0, width: '100vw', height: '100dvh', zIndex: 1000, background: '#000', overflow: 'hidden', and touchAction: 'none'. The 100dvh ensures proper mobile viewport height accounting for browser chrome, and touchAction: 'none' prevents default touch behaviors that could interfere with map interactions."
        }
      ]
    }
  ]
}