{
  "kind": "build_request",
  "title": "Implement Visual Engine finalization with Artist Workshop HDRI and biome-specific lighting",
  "projectName": "CyberGenesis",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Replace the Environment component HDRI URL in CubeVisualization.tsx with 'https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/artist_workshop_1k.hdr', set environmentIntensity to 1.0, and blur to 0",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "Replace the current Environment URL with this Artist Workshop HDRI: `<Environment files=\"https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/artist_workshop_1k.hdr\" environmentIntensity={1.0} blur={0} />`"
        ]
      },
      "acceptanceCriteria": [
        "Environment component uses the artist_workshop_1k.hdr HDRI file",
        "environmentIntensity is set to exactly 1.0",
        "blur property is set to 0"
      ]
    },
    {
      "id": "REQ-2",
      "text": "In LandModel.tsx traverse loop, implement biome-specific lighting settings with a configuration object mapping land types (MYTHIC_VOID, ISLAND_ARCHIPELAGO, DESERT_DUNE, VOLCANIC_CRAG, FOREST_VALLEY, MYTHIC_AETHER, DEFAULT) to env and emissive values: MYTHIC_VOID {env: 3.0, emissive: 7.5}, ISLAND_ARCHIPELAGO {env: 3.0, emissive: 6.0}, DESERT_DUNE {env: 1.0, emissive: 6.2}, VOLCANIC_CRAG {env: 1.5, emissive: 6.6}, FOREST_VALLEY {env: 1.0, emissive: 2.5}, MYTHIC_AETHER {env: 1.0, emissive: 5.5}, DEFAULT {env: 1.0, emissive: 3.2}",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "In the `traverse` loop, update the mapping for ENVMap and Emissive using this specific data: const settings = { MYTHIC_VOID: { env: 3.0, emissive: 7.5 }, ..."
        ]
      },
      "acceptanceCriteria": [
        "Settings object defined with all 6 biome types plus DEFAULT fallback",
        "Each biome has correct env and emissive values as specified",
        "Config is applied inside traverse: const config = settings[landType] || settings.DEFAULT",
        "Material properties set: child.material.envMapIntensity = config.env and child.material.userData.baseEmissive = config.emissive"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Update the pulse animation logic in LandModel.tsx useFrame hook (around line 153) to use the formula: const pulse = 1.0 + Math.sin(state.clock.elapsedTime * 0.8) * 0.25; and set child.material.emissiveIntensity = (child.material.userData.baseEmissive || 3.2) * pulse",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "Update the pulse logic (around line 153) to use the stored values: `const pulse = 1.0 + Math.sin(state.clock.elapsedTime * 0.8) * 0.25;` `child.material.emissiveIntensity = (child.material.userData.baseEmissive || 3.2) * pulse;`"
        ]
      },
      "acceptanceCriteria": [
        "Pulse calculation uses Math.sin(state.clock.elapsedTime * 0.8) * 0.25 added to 1.0",
        "emissiveIntensity multiplies the stored baseEmissive value (or 3.2 default) by pulse",
        "Pulse logic only applies to materials with emissive map or color as specified in constraints"
      ]
    }
  ],
  "constraints": [
    "Do not change Bloom threshold (keep it at 2.1)",
    "Do not modify Anisotropy settings",
    "Do not modify Dithering settings",
    "Do not modify DPR settings",
    "Ensure pulse logic only applies to materials that have an emissive map or color"
  ],
  "nonGoals": [],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}