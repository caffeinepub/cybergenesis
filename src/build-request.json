{
  "kind": "build_request",
  "title": "Implement shader-based radial gradient background sphere in CubeVisualization",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "In `frontend/src/components/CubeVisualization.tsx`, implement a shader-based radial gradient background using an inverted sphere (skybox) mesh so the scene background is a deep purple/blue glow in the center fading to black at the edges, without using any external CSS or texture assets.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4",
          "msg-6"
        ],
        "quotes": [
          "Instead of changing global lighting, create a Background Mesh with a ShaderMaterial.",
          "Create a large sphere: `const geometry = new THREE.SphereGeometry(50, 32, 32);`",
          "Invert it so we see the inside: `geometry.scale(-1, 1, 1);`",
          "Fragment Shader: Calculate radial distance from UV center (0.5, 0.5).",
          "Center Color: `vec3(0.1, 0.1, 0.25)` (Deep Purple/Blue).",
          "Edge Color: `vec3(0.0, 0.0, 0.0)` (Pure Black).",
          "Mix: `mix(centerColor, edgeColor, distance * 1.5)`",
          "No external CSS or texture assets used."
        ]
      },
      "acceptanceCriteria": [
        "A large inverted sphere with radius 50 and 32x32 segments is created and rendered as the background (camera is inside the sphere).",
        "The background color is produced via `THREE.ShaderMaterial` (not `scene.background` colors, CSS gradients, or image textures).",
        "The fragment shader computes radial distance from UV center (0.5, 0.5) and mixes from centerColor (0.1,0.1,0.25) to edgeColor (0,0,0) using `distance * 1.5`.",
        "The model lighting/appearance remains dark/moody and bloom remains functional; only the background appearance changes."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update the scene initialization in `CubeVisualization.tsx` so the shader background mesh is visible by setting `scene.background = null`, and set fog to black using `scene.fog = new THREE.FogExp2(0x000000, 0.003)` to preserve floor fade-out behavior.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Ensure `scene.background = null` (so the mesh is visible).",
          "Keep `scene.fog`: Update fog to match the edge color (Black) so the floor fades out properly. `scene.fog = new THREE.FogExp2(0x000000, 0.003);`"
        ]
      },
      "acceptanceCriteria": [
        "After scene setup runs, `scene.background` is `null` (not a `THREE.Color`).",
        "After scene setup runs, `scene.fog` is `THREE.FogExp2` with color 0x000000 and density 0.003.",
        "The background sphere remains visible behind all other scene objects and is not replaced/overridden by a solid scene background color."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Preserve the existing renderer tone mapping exposure configuration: do not change `gl.toneMappingExposure` from `0.6` in `CubeVisualization.tsx`.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "DO NOT change `gl.toneMappingExposure`. Keep it at `0.6` to prevent the Bloom on the model from blowing out into white."
        ]
      },
      "acceptanceCriteria": [
        "`gl.toneMappingExposure` remains explicitly set to `0.6` in the Canvas `onCreated` handler.",
        "No other code path overrides `gl.toneMappingExposure` to a different value at runtime."
      ]
    }
  ],
  "constraints": [
    "Limit changes to the Three.js scene setup in `frontend/src/components/CubeVisualization.tsx`.",
    "Do not use external CSS gradients, images, or texture assets for the background; the gradient must be produced in a shader.",
    "Do not change `gl.toneMappingExposure`; it must remain `0.6`.",
    "Keep the scene lighting configuration as-is; do not alter global lighting to achieve the background effect."
  ],
  "nonGoals": [
    "Changing bloom strength/radius/threshold or other postprocessing parameters.",
    "Modifying `frontend/src/components/CosmicBackground.tsx` or `frontend/src/components/ParticleBackground.tsx`.",
    "Adding new backend functionality or canister changes."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}