{
  "kind": "build_request",
  "title": "Add on-screen debug UI and foolproof CSS to MapView for tablet testing",
  "projectName": "CyberLand Map",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Replace the map container's className-based styling with hardcoded inline styles to prevent height collapse: width: '100vw', height: '100vh', position: 'absolute', top: 0, left: 0, backgroundColor: '#111', zIndex: 0",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Replace `className=\"map-content\"` with hardcoded inline styles to prevent 0px height collapse"
        ]
      },
      "acceptanceCriteria": [
        "Map container div uses inline style object instead of className",
        "Container has explicit 100vw width and 100vh height",
        "Container is absolutely positioned at top-left with zIndex 0"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update map initialization camera settings to safe values: center at [1704, 961], zoom level 1, and pitch 0 degrees for flat view",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "SAFE CAMERA (As you suggested): In map options: `center: [1704, 961]` `zoom: 1` `pitch: 0`"
        ]
      },
      "acceptanceCriteria": [
        "Map center is set to [1704, 961] (middle of 3408x1922 image)",
        "Zoom level is changed from -1 to 1",
        "Pitch is changed from 30 to 0 for flat overhead view"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add on-screen debug UI overlay with lime green text on semi-transparent black background positioned at top-left (top: 80px, left: 20px, zIndex: 9999) displaying real-time debug messages",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "ON-SCREEN DEBUGGER (Crucial for Tablet): Add a new state: `const [debugMsg, setDebugMsg] = useState('Initializing...');`"
        ]
      },
      "acceptanceCriteria": [
        "New debugMsg state variable initialized to 'Initializing...'",
        "Debug overlay div rendered with inline styles: position absolute, top 80px, left 20px, lime color text, semi-transparent black background, zIndex 9999",
        "Debug overlay displays current debugMsg value prefixed with 'DEBUG: '"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Implement event capture to update on-screen debug messages: display map dimensions 500ms after initialization, capture and display ImageLayer 'resourceloaderror' events as 'IMAGE LOAD ERROR (CORS or Link)', and capture 'layerload' events as 'IMAGE LOADED OK'",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "CAPTURE EVENTS TO DEBUG UI: After `mapRef.current = new maptalks.Map(...)`, add: `setTimeout(() => setDebugMsg('Map Size: ' + mapRef.current.width + 'x' + mapRef.current.height), 500);`"
        ]
      },
      "acceptanceCriteria": [
        "After map initialization, a 500ms timeout updates debugMsg with 'Map Size: {width}x{height}'",
        "ImageLayer has 'resourceloaderror' event listener that sets debugMsg to 'IMAGE LOAD ERROR (CORS or Link)'",
        "ImageLayer has 'layerload' event listener that sets debugMsg to 'IMAGE LOADED OK'",
        "All debug messages are visible on tablet screen without DevTools"
      ]
    }
  ],
  "constraints": [
    "Do not modify frontend/src/hooks/useInternetIdentity.ts or frontend/src/hooks/useInternetIdentity.tsx",
    "Do not modify frontend/src/hooks/useActor.ts",
    "Do not modify frontend/src/main.tsx",
    "Do not modify frontend/src/components/ui components",
    "Only modify frontend/src/components/MapView.tsx"
  ],
  "nonGoals": [
    "Changing the Maptalks.js CDN URL or library version",
    "Modifying the image source URL from GitHub Raw",
    "Adding DevTools or console.log statements (user cannot access these on tablet)",
    "Changing the map extent coordinates [0, 0, 3408, 1922]",
    "Implementing any backend changes"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}