{
  "kind": "build_request",
  "title": "Finalize map orientation and physics with Y-axis flip",
  "projectName": "CyberGenesis Map",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Implement flipped Y-axis coordinate system in MapView: set map center to [1704, -961] and map extent to [0, -1922, 3408, 0] for proper top-down image orientation",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Map Center: [1704, -961]",
          "Map Extent: [0, -1922, 3408, 0]"
        ]
      },
      "acceptanceCriteria": [
        "Map center is positioned at coordinates [1704, -961]",
        "Map extent is configured as [0, -1922, 3408, 0]",
        "Map image appears correctly oriented (not upside down)"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update ImageLayer extent configuration to [0, -1922, 3408, 0] and add canvas renderer with anonymous cross-origin support",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "ImageLayer Extent: [0, -1922, 3408, 0]",
          "renderer: 'canvas', crossOrigin: 'anonymous'"
        ]
      },
      "acceptanceCriteria": [
        "ImageLayer extent matches [0, -1922, 3408, 0]",
        "ImageLayer uses canvas renderer",
        "ImageLayer has crossOrigin set to 'anonymous'"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Position neon ray UIMarkers using flipped coordinates: set position to [land.x, -land.y] to align with the flipped Y-axis coordinate system",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "position: [land.x, -land.y]"
        ]
      },
      "acceptanceCriteria": [
        "UIMarker positions use [land.x, -land.y] format",
        "Neon rays align perfectly with land positions on the flipped map image"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Configure map physics: set default zoom to 2, minZoom to -1, maxZoom to 5, enable dragPan, disable dragPitch, and enable seamless mode to prevent bouncing",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "zoom: 2",
          "minZoom: -1",
          "maxZoom: 5",
          "dragPan: true",
          "dragPitch: false",
          "seamless: true"
        ]
      },
      "acceptanceCriteria": [
        "Default zoom level is 2",
        "User can zoom out to level -1 and zoom in to level 5",
        "Map panning is enabled",
        "Map pitching is disabled",
        "Seamless mode prevents map from bouncing at boundaries"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Remove maxExtent constraint from map options to allow free panning across the entire map area",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Remove `maxExtent` from the Map options for now"
        ]
      },
      "acceptanceCriteria": [
        "maxExtent is not set in map configuration",
        "User can pan freely without artificial boundaries"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Remove the green debug UI overlay from MapView component",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Remove the Green Debug UI"
        ]
      },
      "acceptanceCriteria": [
        "Debug UI overlay is not rendered",
        "No green diagnostic text appears on screen"
      ]
    },
    {
      "id": "REQ-7",
      "text": "Ensure close button has zIndex of 100 and set pointer-events to none on neon ray marker content (the ray div) to prevent blocking map dragging interactions",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Ensure the Close Button is visible (zIndex: 100)",
          "pointer-events: none on the ray div"
        ]
      },
      "acceptanceCriteria": [
        "Close button has z-index: 100",
        "Close button remains visible and clickable",
        "Neon ray marker divs have pointer-events: none",
        "Map dragging is not blocked by ray markers"
      ]
    }
  ],
  "constraints": [
    "Use Maptalks.js CDN library as already implemented in MapView.tsx",
    "Maintain existing neon ray visual styling and biome color coding",
    "Keep map in 2D mode (no 3D transforms)",
    "Do not modify backend/main.mo or any immutable frontend paths"
  ],
  "nonGoals": [
    "Adding map boundaries or extent restrictions (to be added later if needed)",
    "Changing the underlying map library",
    "Modifying 3D visualization components",
    "Adding new map interaction features beyond panning and zooming"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}