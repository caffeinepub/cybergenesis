{
  "kind": "build_request",
  "title": "Implement Golden Archive MapView rewrite with drone navigation physics",
  "projectName": "CyberGenesis",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Replace the map instantiation block in MapView.tsx (around lines 127-148) with the complete Golden Archive configuration: identity projection with spatialReference using resolutions [32, 16, 8, 4, 2, 1], fullExtent {top: 0, left: 0, bottom: -1922, right: 3408}, maxExtent new window.maptalks.Extent(0, -1922, 3408, 0), center [1704, -961], zoom 1, minZoom 0, maxZoom 5, pitch 45, bearing 0, devicePixelRatio window.devicePixelRatio || 2, enable all drag/touch controls (draggable, dragPan, dragRotate, dragPitch, touchZoom, touchRotate, touchPitch), dragInertia true, seamlessZoom true, centerCross false, attribution false. Add map.config('panLimit', true) after instantiation.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Replace the current `new window.maptalks.Map(...)` instantiation (around lines 127-148) with this precise config"
        ]
      },
      "acceptanceCriteria": [
        "Map uses identity projection with correct spatial reference and resolution pyramid",
        "Boundaries are enforced with maxExtent [0, -1922, 3408, 0] and panLimit true",
        "All drag and touch controls are enabled as specified",
        "dragInertia is enabled for kinetic physics",
        "devicePixelRatio is set for retina display support"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update the ImageLayer configuration in MapView.tsx (around lines 151-160) to use the webp source URL 'https://raw.githubusercontent.com/dobr312/cyberland/refs/heads/main/CyberMap/IMG_8296.webp', extent [0, -1922, 3408, 0], opacity 1, renderer 'canvas', crossOrigin 'anonymous', and add forceRenderOnMoving: true to the layer options.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Update the ImageLayer configuration (around lines 151-160) to use the new webp source and force rendering"
        ]
      },
      "acceptanceCriteria": [
        "ImageLayer uses the specified webp URL as the base map",
        "Layer extent matches the coordinate system [0, -1922, 3408, 0]",
        "forceRenderOnMoving is set to true for smooth rendering during navigation"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Update the animateTo block in MapView.tsx (around lines 221-233) to use these cinematic drone entry parameters: center [targetX, -targetY], zoom 3, pitch 55, bearing 15, duration 3500ms, easing 'out', with the entire animation wrapped in a 500ms setTimeout delay.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Find the animateTo block (around lines 221-233) and update it"
        ]
      },
      "acceptanceCriteria": [
        "Initial animation zooms to level 3 with 55° pitch and 15° bearing",
        "Animation duration is 3500ms with 'out' easing",
        "Animation starts after 500ms delay"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Update the map container div style in MapView.tsx (around lines 284-294) to include: position fixed, top 0, left 0, width 100vw, height 100dvh, zIndex 1000, background #000, overflow hidden, and add touchAction 'none' for mobile viewport handling.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "In the main return statement (around lines 284-294), update the style"
        ]
      },
      "acceptanceCriteria": [
        "Container uses 100dvh for proper mobile viewport height",
        "touchAction: none prevents default touch behaviors",
        "overflow: hidden prevents scrolling outside the map"
      ]
    }
  ],
  "constraints": [
    "Do NOT modify UIMarker logic in MapView.tsx",
    "Do NOT modify React hooks in MapView.tsx",
    "Do NOT modify Emissive land logic in MapView.tsx",
    "Only replace the four specific sections identified: map instantiation (~127-148), ImageLayer config (~151-160), animateTo block (~221-233), and container style (~284-294)"
  ],
  "nonGoals": [
    "Changing any component logic outside the four specified sections",
    "Modifying marker rendering or click interactions",
    "Altering React state management or useEffect hooks",
    "Removing or changing the Green Debug UI (mentioned for cleanup but not in scope)"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}